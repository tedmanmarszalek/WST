<!DOCTYPE html>
<html>
<head>
<title> Add Sculpture </title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Oxygen:400,700,300' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="css/style_index.css">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
<script>
var app = angular.module('addSculpture', []);

app.factory('addSculptureFactory', function($http){
  var getData = function(){
    return $http.get("/api/types").then(function(result){
      return result.data;
    });  
  }

  return { getData: getData };
});

app.factory('addLocationFactory', function($http){
  var getData = function(){
    return $http.get("/api/locations").then(function(result){
      return result.data;
    });  
  }

  return { getData: getData };
});


app.controller('AddSculptCtrl', function ($scope, $http, $window, addSculptureFactory, addLocationFactory) {

  $scope.types = [];
  $scope.locations = [];

  var sculpturePromise = addSculptureFactory.getData();
  sculpturePromise.then(function(result) {
      var data = result;
      for(var i = 0; i < data.length; i++){
        $scope.types.push(data[i]); 
      }
    });

  var locationPromise = addLocationFactory.getData();
  locationPromise.then(function(result) {
      var data = result;
      for(var i = 0; i < data.length; i++){
        $scope.locations.push(data[i]); 
      }
    });

  $scope.submit = function(){
    //event.preventDefault();
    sessionStorage.tourType = $scope.selectedType;
    sessionStorage.tourLocation = $scope.selectedLocation;
    document.location = 'overview.html';
  }
});
</script>

<body ng-app="addSculpture" ng-controller="AddSculptCtrl" style="overflow-x:hidden">
  <img class="homepageonmapview-img" src="/img/Icons/GoBackToList.png" onclick="document.location = '/';"></img>
    <div class="row">
        <div class="col-lg-12 text-center">
            <img class="top-img" src="img/UPD.jpg" >
        </div>
    </div>
    <div class="row" style="padding-top:50px;">
        <div class="col-md-7 col-md-offset-2">
      <p style="font-size:40px; padding-bottom:20px;">Tour Options</p>
      </div>
    </div>

    <div class="col-md-8 col-md-offset-2">
        <label for="typebox"> Location </label><br>
        <select name="typebox" id="typebox" ng-model="selectedLocation">
          <option disabled selected value> -- select an option -- </option>
          <option ng-repeat="location in locations" value={{location.name}}>{{location.name}}s</option>
        </select><br>

        <label for="typebox"> Type </label><br>
        <select name="typebox" id="typebox" ng-model="selectedType">
          <option disabled selected value> -- select an option -- </option>
          <option value="All">All</option>
          <option ng-repeat="type in types" value={{type.name}}>{{type.name}}s</option>
        </select><br>
    </div>
    <button type="submit" class="btn btn-primary" ng-click="submit()">Submit</button>
</body>
</html>
